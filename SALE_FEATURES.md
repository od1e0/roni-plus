# Функциональность скидок в Roni Plus

## Обзор

Добавлена возможность управления скидками на товары через админ-панель. Администраторы могут устанавливать товары на распродажу, указывать скидочные цены и даты окончания акций.

## Новые поля в типе Product

```typescript
interface Product {
  // ... существующие поля ...
  
  // Поля для скидок
  isOnSale?: boolean;        // Товар на распродаже
  salePrice?: number;        // Цена со скидкой
  salePercentage?: number;   // Процент скидки (автоматически рассчитывается)
  saleEndDate?: string;      // Дата окончания скидки
}
```

## Функциональность в админ-панели

### 1. Форма добавления/редактирования товара

В форме товара добавлена секция "Управление скидками":

- **Чекбокс "Товар на распродаже"** - включает/выключает режим скидки
- **Цена со скидкой** - новая цена товара во время распродажи
- **Процент скидки** - автоматически рассчитывается на основе обычной и скидочной цены
- **Дата окончания скидки** - когда скидка перестанет действовать

### 2. Валидация

- Цена со скидкой должна быть меньше обычной цены
- Для товара на распродаже обязательно указывать цену со скидкой и дату окончания
- Процент скидки рассчитывается автоматически

### 3. Список товаров

В таблице товаров добавлена колонка "Скидка":
- Показывает процент скидки для активных распродаж
- Отображает скидочную цену рядом с обычной ценой
- Учитывает дату окончания скидки

## Отображение на сайте

### 1. Страница распродажи (/sale)

- Фильтрует только товары с активными скидками
- Красивое оформление в стиле сайта
- Показывает количество товаров со скидкой
- Информативные блоки о преимуществах покупки на распродаже

### 2. Карточки товаров

- Скидочный бейдж с процентом скидки
- Дата окончания скидки
- Отображение скидочной цены
- Информация об экономии

### 3. Автоматическое управление

- Скидки автоматически деактивируются по истечении даты
- Процент скидки пересчитывается при изменении цен
- Товары с истекшими скидками не отображаются на странице распродажи

## API изменения

### Создание/обновление товара

При отправке формы товара теперь включаются поля скидок:

```typescript
const productData = {
  // ... существующие поля ...
  isOnSale: boolean,
  salePrice?: number,
  salePercentage?: number,
  saleEndDate?: string,
};
```

### Получение товаров

Товары теперь включают информацию о скидках, что позволяет:
- Фильтровать товары на распродаже
- Отображать скидочные цены
- Показывать актуальность скидок

## Стилизация

### Цветовая схема

- **Красный** - для скидочных бейджей и акций
- **Зеленый** - для активных скидок
- **Нейтральные тона** - для основного контента

### Анимации

- Плавные переходы при наведении
- Масштабирование элементов
- Градиентные фоны для привлечения внимания

## Безопасность

- Валидация на клиентской и серверной стороне
- Проверка корректности дат
- Контроль целостности данных о скидках

## Будущие улучшения

1. **Уведомления** - автоматические уведомления об окончании скидок
2. **Статистика** - аналитика по эффективности скидок
3. **Массовые операции** - установка скидок на группы товаров
4. **Промокоды** - дополнительная система скидок
5. **История цен** - отслеживание изменений цен товаров

## Использование

### Для администраторов

1. Перейдите в админ-панель → Товары
2. Создайте новый товар или отредактируйте существующий
3. Включите чекбокс "Товар на распродаже"
4. Укажите скидочную цену и дату окончания
5. Сохраните изменения

### Для пользователей

1. Перейдите на страницу распродажи (/sale)
2. Просматривайте товары со скидками
3. Используйте фильтры по категориям
4. Связывайтесь с консультантами для заказа

## Технические детали

- Использует React hooks для управления состоянием
- TypeScript для типизации данных
- Tailwind CSS для стилизации
- Responsive дизайн для всех устройств
- Оптимизированная производительность
